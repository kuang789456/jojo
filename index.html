<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spelling Challenge</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial Rounded MT Bold', 'Arial', sans-serif;
        }
        
        body {
            background: linear-gradient(to bottom, #5ea3ff, #8cd3ff);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            overflow-x: hidden;
        }
        
        /* 云朵装饰 */
        .cloud {
            position: absolute;
            background: white;
            border-radius: 50%;
            z-index: 0;
        }
        
        .cloud-1 {
            width: 120px;
            height: 60px;
            top: 15%;
            left: 10%;
        }
        
        .cloud-2 {
            width: 180px;
            height: 80px;
            top: 25%;
            right: 5%;
        }
        
        .cloud-3 {
            width: 150px;
            height: 70px;
            bottom: 25%;
            left: 5%;
        }
        
        .cloud::before, .cloud::after {
            content: '';
            position: absolute;
            background: white;
            border-radius: 50%;
        }
        
        .cloud-1::before {
            width: 70px;
            height: 70px;
            top: -30px;
            left: 20px;
        }
        
        .cloud-1::after {
            width: 50px;
            height: 50px;
            top: -20px;
            right: 20px;
        }
        
        .cloud-2::before {
            width: 80px;
            height: 80px;
            top: -40px;
            left: 20px;
        }
        
        .cloud-2::after {
            width: 100px;
            height: 100px;
            top: -50px;
            right: 20px;
        }
        
        .cloud-3::before {
            width: 90px;
            height: 90px;
            top: -40px;
            left: 10px;
        }
        
        .cloud-3::after {
            width: 70px;
            height: 70px;
            top: -30px;
            right: 30px;
        }
        
        /* 地面和草地 */
        .ground {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 80px;
            background: linear-gradient(to bottom, #5d4037, #8d6e63);
            z-index: 1;
        }
        
        .grass {
            position: fixed;
            bottom: 80px;
            left: 0;
            width: 100%;
            height: 30px;
            background: linear-gradient(to bottom, #4caf50, #66bb6a);
            z-index: 1;
            border-top: 2px solid #388e3c;
        }
        
        .grass::before {
            content: '';
            position: absolute;
            top: -10px;
            left: 0;
            width: 100%;
            height: 20px;
            background: repeating-linear-gradient(
                90deg,
                transparent,
                transparent 20px,
                #388e3c 20px,
                #388e3c 40px
            );
            border-radius: 50% 50% 0 0;
        }
        
        .game-container {
            width: 100%;
            max-width: 500px;
            background-color: #f8d568;
            border: 8px solid #e74c3c;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            padding: 20px;
            margin-top: 40px;
            position: relative;
            overflow: hidden;
            z-index: 2;
        }
        
        .game-title {
            text-align: center;
            color: white;
            font-size: 2.2rem;
            margin: 10px 0 20px;
            text-shadow: 3px 3px 0 #e74c3c, 5px 5px 0 rgba(0,0,0,0.2);
            letter-spacing: 2px;
            position: relative;
            z-index: 2;
        }
        
        .game-info {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }
        
        .chinese-container {
            background-color: #fff;
            border: 4px solid #2c3e50;
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            margin: 20px 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 10px;
            box-shadow: 0 5px 0 #2c3e50;
            color: #2c3e50;
        }
        
        .word-image {
            width: 100px;
            height: 100px;
            object-fit: contain;
            border-radius: 10px;
            border: 2px solid #3498db;
            background-color: white;
        }
        
        .word-meaning {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.8rem;
        }
        
        .speaker-icon {
            width: 30px;
            height: 30px;
            background-color: #3498db;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 3px 0 #2980b9;
        }
        
        .speaker-icon:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 0 #2980b9;
        }
        
        .speaker-icon:active {
            transform: translateY(1px);
            box-shadow: 0 2px 0 #2980b9;
        }
        
        .speaker-icon::before {
            content: '';
            display: block;
            width: 0;
            height: 0;
            border-style: solid;
            border-width: 8px 0 8px 12px;
            border-color: transparent transparent transparent white;
        }
        
        .current-spelling {
            background-color: #fff;
            border: 4px solid #27ae60;
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            font-size: 2rem;
            margin: 20px 0;
            min-height: 70px;
            letter-spacing: 5px;
            color: #2c3e50;
            box-shadow: 0 5px 0 #27ae60;
        }
        
        .letters-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }
        
        .letter {
            width: 60px;
            height: 60px;
            background-color: #3498db;
            border: 4px solid #2980b9;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: white;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 5px 0 #2980b9;
            user-select: none;
        }
        
        .letter:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 0 #2980b9;
        }
        
        .letter:active {
            transform: translateY(2px);
            box-shadow: 0 3px 0 #2980b9;
        }
        
        .controls {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            gap: 10px;
        }
        
        .control-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 10px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 5px 0 rgba(0,0,0,0.2);
        }
        
        .control-btn:active {
            transform: translateY(3px);
            box-shadow: 0 2px 0 rgba(0,0,0,0.2);
        }
        
        .check-btn {
            background-color: #2ecc71;
            color: white;
        }
        
        .retry-btn {
            background-color: #f39c12;
            color: white;
        }
        
        .next-btn {
            background-color: #3498db;
            color: white;
        }
        
        .reset-btn {
            background-color: #e74c3c;
            color: white;
        }
        
        .message {
            text-align: center;
            font-size: 1.5rem;
            margin: 15px 0;
            min-height: 40px;
            color: #e74c3c;
            font-weight: bold;
        }
        
        .progress {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 10px 0;
            font-size: 1.2rem;
            color: #2c3e50;
            font-weight: bold;
            gap: 10px;
        }
        
        .progress-m {
            display: flex;
            gap: 5px;
        }
        
        .m-dot {
            width: 30px;
            height: 30px;
            background-color: #e74c3c;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            box-shadow: 0 3px 0 #c0392b;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .m-dot:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 0 #c0392b;
        }
        
        .m-dot.active {
            background-color: #2ecc71;
            box-shadow: 0 3px 0 #27ae60;
        }
        
        .m-dot.active:hover {
            box-shadow: 0 5px 0 #27ae60;
        }
        
        .result-screen {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 10;
            align-items: center;
            justify-content: center;
        }
        
        .result-content {
            background-color: #f8d568;
            border: 8px solid #e74c3c;
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            max-width: 400px;
            width: 90%;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
        }
        
        .result-title {
            color: #e74c3c;
            font-size: 2.5rem;
            margin-bottom: 20px;
            text-shadow: 2px 2px 0 white;
        }
        
        .result-stats {
            font-size: 1.5rem;
            color: #2c3e50;
            margin-bottom: 30px;
        }
        
        .result-btn {
            padding: 12px 25px;
            background-color: #2ecc71;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 5px 0 #27ae60;
        }
        
        .result-btn:active {
            transform: translateY(3px);
            box-shadow: 0 2px 0 #27ae60;
        }
        
        @media (max-width: 500px) {
            .letter {
                width: 50px;
                height: 50px;
                font-size: 1.8rem;
            }
            
            .game-title {
                font-size: 1.8rem;
            }
            
            .chinese-container, .current-spelling {
                font-size: 1.5rem;
            }
            
            .m-dot {
                width: 25px;
                height: 25px;
            }
            
            .word-image {
                width: 80px;
                height: 80px;
            }
        }
    </style>
</head>
<body>
    <div class="cloud cloud-1"></div>
    <div class="cloud cloud-2"></div>
    <div class="cloud cloud-3"></div>
    
    <div class="grass"></div>
    <div class="ground"></div>
    
    <h1 class="game-title">Spelling Challenge</h1>
    
    <div class="game-container">
        <div class="game-info">根据中文意思拼写单词</div>
        
        <div class="progress">
            关卡: 
            <div class="progress-m" id="progress-m">
                <!-- M进度点将通过JavaScript动态生成 -->
            </div>
        </div>
        
        <div class="chinese-container">
            <img class="word-image" id="word-image" src="" alt="单词图片">
            <div class="word-meaning">
                <span id="chinese-meaning">太阳</span>
                <div class="speaker-icon" id="speaker-icon"></div>
            </div>
        </div>
        
        <div class="current-spelling" id="current-spelling"></div>
        
        <div class="letters-container" id="letters-container">
            <!-- 字母按钮将通过JavaScript动态生成 -->
        </div>
        
        <div class="message" id="message"></div>
        
        <div class="controls">
            <button class="control-btn check-btn" id="check-btn">检查</button>
            <button class="control-btn retry-btn" id="retry-btn">重试</button>
            <button class="control-btn next-btn" id="next-btn">下一个</button>
            <button class="control-btn reset-btn" id="reset-btn">重置</button>
        </div>
    </div>
    
    <div class="result-screen" id="result-screen">
        <div class="result-content">
            <h2 class="result-title">恭喜完成挑战!</h2>
            <div class="result-stats" id="result-stats">
                正确: <span id="correct-count">0</span> 题<br>
                错误: <span id="wrong-count">0</span> 题
            </div>
            <button class="result-btn" id="play-again-btn">再玩一次</button>
        </div>
    </div>

    <script>
        // 单词库
        const wordList = [
            { chinese: "太阳", english: "sun", image: "https://copyright.bdstatic.com/vcg/creative/fcd9f25feccefb100ad5e142ad25bc55.eps@h_1280" },
            { chinese: "毯子", english: "mat", image: "https://a.vpimg4.com/upload/merchandise/pdcvis/2022/09/29/95/ecd39633-391d-42a7-9fb3-eca9b70c2312.jpg"},
            { chinese: "鱼", english: "fish", image: "https://img1.baidu.com/it/u=761028811,1074189717&fm=253&fmt=auto&app=138&f=JPEG?w=242&h=242" },
            { chinese: "熊", english: "bear", image: "https://img10.360buyimg.com/n1/jfs/t1/263922/4/9187/142044/677ce301F65e8b01f/7f97541d7b19d0c6.jpg" },
            { chinese: "鸡蛋", english: "egg", image: "https://q4.itc.cn/q_70/images03/20250214/34ce03faa1604907878d6f9b5d458851.jpeg" },
            { chinese: "熊猫", english: "panda", image: "https://i2.hdslb.com/bfs/archive/3cf36fbf20e10f4b06f90510a41734c14881044b.jpg" },
            { chinese: "公牛", english: "ox", image: "https://img95.699pic.com/xsj/19/zo/as.jpg!/fh/300" },
            { chinese: "垃圾桶", english: "bin", image: "https://img1.jc001.cn/img/398/1172398/1007/1278728213729.jpg" },
            { chinese: "袋鼠", english: "kangaroo", image: "https://img2.baidu.com/it/u=956038783,14989014&fm=253&fmt=auto&app=138&f=JPEG?w=585&h=500" },
            { chinese: "茶杯", english: "cup", image: "https://img0.baidu.com/it/u=2187296723,3656323194&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=598" }
        ];
        
        // 游戏状态
        let currentWordIndex = 0;
        let currentSpelling = "";
        let shuffledLetters = [];
        let correctAnswers = 0;
        let wrongAnswers = 0;
        
        // DOM元素
        const chineseMeaningElement = document.getElementById('chinese-meaning');
        const wordImageElement = document.getElementById('word-image');
        const currentSpellingElement = document.getElementById('current-spelling');
        const lettersContainerElement = document.getElementById('letters-container');
        const messageElement = document.getElementById('message');
        const progressMElement = document.getElementById('progress-m');
        const speakerIcon = document.getElementById('speaker-icon');
        const checkButton = document.getElementById('check-btn');
        const retryButton = document.getElementById('retry-btn');
        const nextButton = document.getElementById('next-btn');
        const resetButton = document.getElementById('reset-btn');
        const resultScreen = document.getElementById('result-screen');
        const correctCountElement = document.getElementById('correct-count');
        const wrongCountElement = document.getElementById('wrong-count');
        const playAgainButton = document.getElementById('play-again-btn');
        
        // 初始化游戏
        function initGame() {
            loadWord(currentWordIndex);
            setupEventListeners();
            renderProgressM();
        }
        
        // 加载单词
        function loadWord(index) {
            const word = wordList[index];
            chineseMeaningElement.textContent = word.chinese;
            wordImageElement.src = word.image;
            wordImageElement.alt = word.english;
            currentSpelling = "";
            currentSpellingElement.textContent = currentSpelling;
            messageElement.textContent = "";
            
            // 打乱字母顺序
            shuffledLetters = shuffleArray([...word.english.toLowerCase()]);
            renderLetters();
            
            // 更新进度指示器
            updateProgressM(index);
        }
        
        // 打乱数组顺序
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }
        
        // 渲染字母按钮
        function renderLetters() {
            lettersContainerElement.innerHTML = "";
            
            shuffledLetters.forEach(letter => {
                const letterElement = document.createElement('div');
                letterElement.className = 'letter';
                letterElement.textContent = letter;
                letterElement.addEventListener('click', () => handleLetterClick(letter));
                lettersContainerElement.appendChild(letterElement);
            });
        }
        
        // 处理字母点击
        function handleLetterClick(letter) {
            currentSpelling += letter;
            currentSpellingElement.textContent = currentSpelling;
        }
        
        // 播放单词发音
        function speakWord() {
            const word = wordList[currentWordIndex].english;
            
            // 检查浏览器是否支持语音合成
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(word);
                utterance.lang = 'en-US';
                utterance.rate = 0.8;
                
                // 检查是否有可用的语音（需要网络连接）
                const voices = speechSynthesis.getVoices();
                if (voices.length > 0) {
                    utterance.voice = voices[0];
                    speechSynthesis.speak(utterance);
                } else {
                    messageElement.textContent = "语音功能需要联网使用";
                    setTimeout(() => {
                        messageElement.textContent = "";
                    }, 2000);
                }
            } else {
                messageElement.textContent = "您的浏览器不支持语音功能";
                setTimeout(() => {
                    messageElement.textContent = "";
                }, 2000);
            }
        }
        
        // 检查拼写
        function checkSpelling() {
            const currentWord = wordList[currentWordIndex].english.toLowerCase();
            
            if (currentSpelling === currentWord) {
                messageElement.textContent = "正确！";
                messageElement.style.color = "#27ae60";
                correctAnswers++;
            } else {
                messageElement.textContent = "不正确，再试一次！";
                messageElement.style.color = "#e74c3c";
                wrongAnswers++;
            }
        }
        
        // 重试当前单词
        function retryWord() {
            currentSpelling = "";
            currentSpellingElement.textContent = currentSpelling;
            messageElement.textContent = "";
            shuffledLetters = shuffleArray([...wordList[currentWordIndex].english.toLowerCase()]);
            renderLetters();
        }
        
        // 下一个单词
        function nextWord() {
            currentWordIndex++;
            
            if (currentWordIndex < wordList.length) {
                loadWord(currentWordIndex);
            } else {
                // 显示结算画面
                showResultScreen();
            }
        }
        
        // 重置游戏
        function resetGame() {
            currentWordIndex = 0;
            correctAnswers = 0;
            wrongAnswers = 0;
            loadWord(currentWordIndex);
        }
        
        // 渲染M进度指示器
        function renderProgressM() {
            progressMElement.innerHTML = "";
            
            for (let i = 0; i < wordList.length; i++) {
                const mDot = document.createElement('div');
                mDot.className = 'm-dot';
                mDot.textContent = 'M';
                mDot.dataset.index = i;
                mDot.addEventListener('click', () => {
                    // 点击进度点跳转到对应题目
                    currentWordIndex = i;
                    loadWord(currentWordIndex);
                });
                progressMElement.appendChild(mDot);
            }
        }
        
        // 更新M进度指示器
        function updateProgressM(index) {
            const mDots = document.querySelectorAll('.m-dot');
            
            mDots.forEach((dot, i) => {
                if (i <= index) {
                    dot.classList.add('active');
                } else {
                    dot.classList.remove('active');
                }
            });
        }
        
        // 显示结算画面
        function showResultScreen() {
            correctCountElement.textContent = correctAnswers;
            wrongCountElement.textContent = wrongAnswers;
            resultScreen.style.display = 'flex';
        }
        
        // 隐藏结算画面
        function hideResultScreen() {
            resultScreen.style.display = 'none';
        }
        
        // 设置事件监听器
        function setupEventListeners() {
            speakerIcon.addEventListener('click', speakWord);
            checkButton.addEventListener('click', checkSpelling);
            retryButton.addEventListener('click', retryWord);
            nextButton.addEventListener('click', nextWord);
            resetButton.addEventListener('click', resetGame);
            playAgainButton.addEventListener('click', () => {
                hideResultScreen();
                resetGame();
            });
        }
        
        // 初始化游戏
        window.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>
</html>